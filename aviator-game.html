<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Aviator</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body{
  margin:0;
  background:#0b0b0b;
  color:#fff;
  font-family:Arial;
}

.header{
  display:flex;
  justify-content:space-between;
  padding:14px;
  font-size:22px;
  font-weight:bold;
}
.header span{color:#00e676}

.history{
  padding:6px 14px;
  font-size:14px;
  color:#5dade2;
}

.game{
  height:45vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:48px;
  font-weight:bold;
  color:#ff5252;
}

.controls{
  padding:12px;
}

.bet-box{
  background:#1c1c1c;
  padding:12px;
  border-radius:12px;
  margin-bottom:12px;
}

.bet-row{
  display:flex;
  align-items:center;
  gap:6px;
}

.bet-row input{
  flex:1;
  padding:10px;
  font-size:18px;
  text-align:center;
  border-radius:8px;
  border:none;
}

.bet-row button{
  width:40px;
  height:40px;
  font-size:20px;
  border:none;
  border-radius:8px;
  background:#333;
  color:#fff;
}

.quick{
  display:flex;
  gap:6px;
  margin-top:6px;
}
.quick button{
  flex:1;
  padding:8px;
  background:#333;
  border:none;
  border-radius:8px;
  color:#fff;
}

.bet-btn{
  margin-top:8px;
  width:100%;
  padding:12px;
  background:#2ecc71;
  border:none;
  border-radius:10px;
  font-size:18px;
  font-weight:bold;
}

.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.popup-box{
  background:#111;
  padding:25px;
  border-radius:14px;
  text-align:center;
  font-size:22px;
}
.popup.win{color:#2ecc71}
.popup.loss{color:#ff5252}
.popup.bet{color:#5dade2}
</style>
</head>

<body>

<div class="header">
  <div>Aviator</div>
  <div>₹ <span id="wallet">3000</span></div>
</div>

<div class="history" id="history"></div>

<div class="game" id="screen">WAITING</div>

<div class="controls">
  <div class="bet-box">
    <div class="bet-row">
      <button onclick="chg(-1)">-</button>
      <input id="betAmt" value="10">
      <button onclick="chg(1)">+</button>
    </div>
    <div class="quick">
      <button onclick="setAmt(1)">1</button>
      <button onclick="setAmt(2)">2</button>
      <button onclick="setAmt(5)">5</button>
      <button onclick="setAmt(10)">10</button>
    </div>
    <button class="bet-btn" id="betBtn" onclick="placeBet()">BET</button>
  </div>
</div>

<div class="popup" id="popup">
  <div class="popup-box" id="popupBox"></div>
</div>

<script>
let wallet = 3000;
let state="WAIT";
let multiplier=1;
let crashAt=0;
let interval;
let bet=0;
let history=[];

function showPopup(type,msg){
  const p=document.getElementById("popup");
  const b=document.getElementById("popupBox");
  p.style.display="flex";
  b.className="popup-box "+type;
  b.innerHTML=msg;
  setTimeout(()=>p.style.display="none",1500);
}

function setAmt(v){betAmt.value=v}
function chg(v){betAmt.value=+betAmt.value+v}

function getCrash(){
  let r=Math.random();
  if(r<0.5) return +(1+Math.random()*1.5).toFixed(2);
  if(r<0.85) return +(2+Math.random()*3).toFixed(2);
  return +(5+Math.random()*15).toFixed(2);
}

function placeBet(){
  if(state!=="WAIT") return;
  bet=+betAmt.value;
  if(bet<1||bet>wallet) return;
  wallet-=bet;
  update();
  showPopup("bet","BET PLACED<br>₹"+bet);
}

function startRound(){
  state="FLY";
  multiplier=1;
  crashAt=getCrash();
  betBtn.innerText="CASH OUT";
  interval=setInterval(fly,60);
}

function fly(){
  multiplier+=0.02+multiplier*0.01;
  multiplier=+multiplier.toFixed(2);
  screen.innerText=multiplier+"x";
  if(multiplier>=crashAt) crash();
}

betBtn.onclick=()=>{
  if(state==="FLY"){
    clearInterval(interval);
    let win=+(bet*multiplier).toFixed(0);
    wallet+=win;
    showPopup("win","CASHED OUT<br>₹"+win);
    end(multiplier);
  }
};

function crash(){
  clearInterval(interval);
  showPopup("loss","CRASHED @ "+multiplier+"x");
  end(multiplier);
}

function end(val){
  history.unshift(val+"x");
  history=history.slice(0,6);
  document.getElementById("history").innerText=history.join("   ");
  state="WAIT";
  betBtn.innerText="BET";
  screen.innerText="WAITING";
  update();
}

function update(){
  wallet.innerText=wallet;
}

setInterval(()=>{
  if(state==="WAIT") startRound();
},3000);

update();
</script>

</body>
</html>
