<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GOD â€¢ DEVIL â€¢ DRAW</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;background:#0f0f0f;color:#fff;
  font-family:Arial,Helvetica,sans-serif;
}
.container{max-width:420px;margin:auto;padding:15px}
h1{text-align:center;margin:10px 0}
.card{
  background:#1c1c1c;border-radius:12px;padding:15px;margin-bottom:12px
}
.row{display:flex;justify-content:space-between;align-items:center}
.center{text-align:center}
.timer{font-size:26px;color:#ff4d6d}
.state{font-size:22px;font-weight:bold}
.btns{display:flex;gap:8px;margin-top:10px}
.btn{
  flex:1;padding:12px;border-radius:10px;
  text-align:center;font-weight:bold;cursor:pointer
}
.god{background:#2196f3}
.draw{background:#4caf50}
.devil{background:#ff5722}
.selected{outline:3px solid #fff}
input{
  width:100%;padding:12px;border-radius:10px;
  border:none;font-size:16px;margin-top:10px
}
button{
  width:100%;padding:14px;border:none;
  border-radius:12px;font-size:16px;
  background:#2979ff;color:#fff;margin-top:10px
}
.log{font-size:14px;margin-top:8px}
.popup{
  position:fixed;inset:0;background:rgba(0,0,0,.7);
  display:none;align-items:center;justify-content:center
}
.popup div{
  background:#1c1c1c;padding:20px;border-radius:12px;
  text-align:center
}
</style>
</head>

<body>
<div class="container">
<h1>ðŸ‘‘ GOD â€¢ DEVIL â€¢ DRAW</h1>

<div class="card">
  <div class="row">
    <div>Period: <span id="period"></span></div>
    <div>Wallet: â‚¹<span id="wallet"></span></div>
  </div>
  <div class="center">
    <div class="state" id="state">BET NOW</div>
    <div class="timer" id="timer"></div>
  </div>
</div>

<div class="card center">
  <div class="row">
    <div class="btn god" id="godCard">GOD</div>
    <div class="btn draw">VS</div>
    <div class="btn devil" id="devilCard">DEVIL</div>
  </div>

  <input type="number" id="amount" placeholder="Min â‚¹1">

  <div class="btns">
    <div class="btn god" onclick="selectBet('GOD')">GOD</div>
    <div class="btn draw" onclick="selectBet('DRAW')">DRAW</div>
    <div class="btn devil" onclick="selectBet('DEVIL')">DEVIL</div>
  </div>

  <button onclick="placeBet()">PLACE BET</button>
</div>

<div class="card">
  <b>Last 10 Games</b>
  <div id="history" class="log"></div>
</div>

<div class="card">
  <b>My Bets</b>
  <div id="mybets" class="log"></div>
</div>
</div>

<div class="popup" id="popup">
  <div id="popupText"></div>
</div>

<script>
const ROUND = 40;
const BET_TIME = 25;
const LOCK_TIME = 30;
const FLIP_TIME = 35;

let data = JSON.parse(localStorage.getItem("gdd")) || {
  wallet:100,
  period:1000,
  start:Date.now(),
  history:[],
  bets:[]
};

let selected = null;
let bet = null;

function save(){localStorage.setItem("gdd",JSON.stringify(data));}

function card(){
  const c=["A","K","Q","J","10","9","8","7","6","5","4","3","2"];
  return c[Math.floor(Math.random()*c.length)];
}
function val(c){
  return c==="A"?14:c==="K"?13:c==="Q"?12:c==="J"?11:parseInt(c);
}

function update(){
  let now=Date.now();
  let diff=Math.floor((now-data.start)/1000);
  if(diff>=ROUND){
    data.start+=ROUND*1000;
    data.period++;
    save();
  }
  let t=ROUND-diff;
  document.getElementById("timer").innerText=t+"s";
  document.getElementById("period").innerText=data.period;
  document.getElementById("wallet").innerText=data.wallet.toFixed(2);

  if(t>ROUND-BET_TIME){
    document.getElementById("state").innerText="BET NOW";
  }else if(t>ROUND-LOCK_TIME){
    document.getElementById("state").innerText="LOCKED";
  }else if(t>ROUND-FLIP_TIME){
    document.getElementById("state").innerText="FLIPPING";
  }else{
    document.getElementById("state").innerText="RESULT";
  }
}
setInterval(update,500);

function selectBet(x){
  selected=x;
  document.querySelectorAll(".btn").forEach(b=>b.classList.remove("selected"));
  event.target.classList.add("selected");
}

function popup(msg){
  let p=document.getElementById("popup");
  document.getElementById("popupText").innerHTML=msg;
  p.style.display="flex";
  setTimeout(()=>p.style.display="none",1500);
}

function placeBet(){
  let amt=parseFloat(amount.value);
  if(!selected||amt<1||amt>data.wallet)return;
  bet={choice:selected,amt,period:data.period};
  data.wallet-=amt;
  data.bets.unshift(`P${data.period} | ${selected} | -â‚¹${amt}`);
  popup("BET PLACED");
  save();
}

function result(){
  let g=card(),d=card();
  godCard.innerText="GOD "+g;
  devilCard.innerText="DEVIL "+d;
  let r="DRAW";
  if(val(g)>val(d))r="GOD";
  if(val(d)>val(g))r="DEVIL";
  data.history.unshift(`#${data.period} â†’ ${r}`);
  if(bet&&bet.period===data.period){
    if(bet.choice===r){
      let win=bet.amt*2;
      data.wallet+=win;
      popup("YOU WIN â‚¹"+win);
      data.bets.unshift(`P${data.period} | WIN +â‚¹${win}`);
    }else{
      popup("YOU LOST");
      data.bets.unshift(`P${data.period} | LOSS`);
    }
  }
  bet=null;
  save();
}

setInterval(()=>{
  let t=ROUND-Math.floor((Date.now()-data.start)/1000);
  if(t===5) result();
},1000);

function render(){
  history.innerHTML=data.history.slice(0,10).join("<br>");
  mybets.innerHTML=data.bets.slice(0,10).join("<br>");
}
setInterval(render,1000);
</script>
</body>
</html>
