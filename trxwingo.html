<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GOD â€¢ DEVIL â€¢ DRAW</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  background:#0f0f0f;
  font-family:Arial,sans-serif;
  color:#fff;
  text-align:center;
}
h1{margin:15px 0}
.card{
  background:#1c1c1c;
  margin:12px;
  border-radius:16px;
  padding:16px;
}
.row{display:flex;gap:10px;justify-content:center}
.box{
  flex:1;
  padding:25px 0;
  border-radius:12px;
  font-weight:bold;
  font-size:18px;
}
.god{background:#2196f3}
.draw{background:#4caf50}
.devil{background:#ff5722}

input{
  width:90%;
  padding:12px;
  border-radius:10px;
  border:none;
  font-size:16px;
}
button{
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
}
.betBtn{background:#2196f3;color:#fff;width:100%}
.selBtn{flex:1}

.lock{opacity:.5}
.green{color:#00e676}
.red{color:#ff5252}

.list{font-size:14px;text-align:left}
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
}
.popup div{
  background:#1c1c1c;
  padding:20px;
  border-radius:14px;
  width:80%;
}
</style>
</head>

<body>

<h1>ðŸ‘‘ GOD â€¢ DEVIL â€¢ DRAW</h1>

<div class="card">
  <div><b>Period:</b> <span id="period"></span> |
  <b>Wallet:</b> â‚¹<span id="wallet"></span></div>

  <h2 id="status">BET NOW</h2>
  <div id="timer">30s</div>

  <div class="row">
    <div class="box god" id="cardGod">GOD</div>
    <div class="box draw" id="cardDraw">DRAW</div>
    <div class="box devil" id="cardDevil">DEVIL</div>
  </div>
</div>

<div class="card">
  <input id="amount" placeholder="Min â‚¹1" type="number" min="1">
  <div class="row">
    <button class="selBtn god" onclick="selectBet('GOD')">GOD</button>
    <button class="selBtn draw" onclick="selectBet('DRAW')">DRAW</button>
    <button class="selBtn devil" onclick="selectBet('DEVIL')">DEVIL</button>
  </div><br>
  <button class="betBtn" id="betBtn" onclick="placeBet()">PLACE BET</button>
</div>

<div class="card">
  <b>Last 10 Games</b>
  <div class="list" id="history"></div>
</div>

<div class="card">
  <b>My Bets</b>
  <div class="list" id="mybets"></div>
</div>

<div class="popup" id="popup">
  <div>
    <h3 id="popupText"></h3>
    <button class="betBtn" onclick="closePop()">OK</button>
  </div>
</div>

<script>
/* ---------- STATE ---------- */
let S = JSON.parse(localStorage.getItem("GDD")) || {
  wallet:100,
  period:1000,
  time:30,
  phase:"BET",
  selected:null,
  bet:null,
  history:[],
  mybets:[]
};

/* ---------- DOM ---------- */
const $ = id=>document.getElementById(id);

/* ---------- INIT ---------- */
render();
setInterval(tick,1000);

/* ---------- FUNCTIONS ---------- */
function render(){
  $("wallet").innerText=S.wallet.toFixed(2);
  $("period").innerText=S.period;
  $("timer").innerText=S.time+"s";
  $("status").innerText=S.phase==="BET"?"BET NOW":"LOCKED";
  $("betBtn").disabled=S.phase!=="BET";

  $("history").innerHTML=S.history.map(h=>`#${h.p} â†’ ${h.r}`).join("<br>");
  $("mybets").innerHTML=S.mybets.map(b=>
    `#${b.p} ${b.s} â‚¹${b.a} â†’ ${b.res}`
  ).join("<br>");
}

function tick(){
  S.time--;
  if(S.time<=0){
    if(S.phase==="BET"){
      S.phase="LOCK";
      S.time=5;
    }else if(S.phase==="LOCK"){
      result();
    }
  }
  save(); render();
}

function selectBet(t){
  if(S.phase!=="BET")return;
  S.selected=t;
}

function placeBet(){
  let a=+$("amount").value;
  if(!S.selected||a<1||a>S.wallet)return alert("Invalid Bet");
  S.wallet-=a;
  S.bet={s:S.selected,a:a,p:S.period};
  S.mybets.unshift({p:S.period,s:S.selected,a:a,res:"PENDING"});
  pop("Bet Placed");
  save();render();
}

function result(){
  let cards=["A","K","Q","J","10","9","8","7"];
  let g=cards[Math.floor(Math.random()*cards.length)];
  let d=cards[Math.floor(Math.random()*cards.length)];
  let winner = g===d?"DRAW":cards.indexOf(g)<cards.indexOf(d)?"GOD":"DEVIL";

  $("cardGod").innerText=g;
  $("cardDevil").innerText=d;

  if(S.bet){
    let win = S.bet.s===winner;
    if(win){
      let amt=S.bet.a*2;
      S.wallet+=amt;
    }
    S.mybets[0].res=win?"WIN":"LOSS";
    pop(win?"YOU WIN":"YOU LOSE");
  }

  S.history.unshift({p:S.period,r:winner});
  if(S.history.length>10)S.history.pop();

  S.bet=null;
  S.selected=null;
  S.period++;
  S.phase="BET";
  S.time=30;
  save();render();
}

function pop(t){
  $("popupText").innerText=t;
  $("popup").style.display="flex";
}
function closePop(){ $("popup").style.display="none"; }
function save(){ localStorage.setItem("GDD",JSON.stringify(S)); }
</script>

</body>
</html>
