<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>GOD â€¢ DEVIL â€¢ DRAW</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;background:#0f0f0f;color:#fff;font-family:Arial}
h1{text-align:center;padding:12px}
.card{background:#1c1c1c;margin:12px;border-radius:14px;padding:16px}
.row{display:flex;gap:10px}
.box{flex:1;text-align:center;padding:18px;border-radius:10px;font-weight:bold}
.god{background:#2196f3}
.draw{background:#4caf50}
.devil{background:#ff5722}
input,button{width:100%;padding:12px;font-size:16px;border-radius:8px;border:none}
button{margin-top:10px;background:#2196f3;color:#fff}
button.active{outline:3px solid #fff}
.locked{background:#555}
.popup{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center}
.popup .inner{background:#222;padding:20px;border-radius:12px;text-align:center}
.small{opacity:.8;font-size:13px}
</style>
</head>

<body>

<h1>ðŸ‘‘ GOD â€¢ DEVIL â€¢ DRAW</h1>

<div class="card">
  <div id="top" class="small"></div>
  <h2 id="phaseText"></h2>
  <h3 id="timerText"></h3>

  <div class="row">
    <div class="box god" id="godCard">GOD ?</div>
    <div class="box draw">DRAW</div>
    <div class="box devil" id="devilCard">DEVIL ?</div>
  </div>
</div>

<div class="card">
  <input id="amount" type="number" min="1" value="1">
  <div class="row">
    <button id="bGOD" onclick="selectBet('GOD')">GOD</button>
    <button id="bDRAW" onclick="selectBet('DRAW')">DRAW</button>
    <button id="bDEVIL" onclick="selectBet('DEVIL')">DEVIL</button>
  </div>
  <button id="betBtn" onclick="placeBet()">PLACE BET</button>
</div>

<div class="card">
  <h3>Last 10 Games</h3>
  <div id="history"></div>
</div>

<div class="card">
  <h3>My Bets</h3>
  <div id="mybets"></div>
</div>

<div class="popup" id="popup">
  <div class="inner" id="popupText"></div>
</div>

<script>
/* ================= STATE ================= */
let S = JSON.parse(localStorage.getItem("GDD")) || {
  period:1000,
  wallet:100,
  phase:"BET",
  time:30,
  bet:null,
  history:[],
  mybets:[]
};

let selected=null;
let loop=null;

/* ================= INIT ================= */
render();
start();

/* ================= GAME LOOP ================= */
function start(){
  clearInterval(loop);
  loop=setInterval(()=>{
    S.time--;

    if(S.phase==="BET" && S.time===5){
      S.phase="LOCK";
    }

    if(S.time===0){
      if(S.phase!=="RESULT"){
        resultPhase();
      }
    }

    save();
    render();
  },1000);
}

/* ================= BET ================= */
function selectBet(t){
  selected=t;
  bGOD.classList.remove("active");
  bDRAW.classList.remove("active");
  bDEVIL.classList.remove("active");
  document.getElementById("b"+t).classList.add("active");
}

function placeBet(){
  if(S.phase!=="BET"){popup("Bet Locked");return;}
  let amt=+amount.value;
  if(!selected||amt<1||amt>S.wallet){popup("Invalid Bet");return;}
  S.wallet-=amt;
  S.bet={type:selected,amt};
  popup("Bet Placed<br>"+selected+" â‚¹"+amt);
  save();render();
}

/* ================= RESULT ================= */
function resultPhase(){
  S.phase="RESULT";

  let g=randomCard();
  let d=randomCard();
  godCard.innerText="GOD "+g;
  devilCard.innerText="DEVIL "+d;

  let win="DRAW";
  if(g>d) win="GOD";
  if(d>g) win="DEVIL";

  if(S.bet){
    if(S.bet.type===win){
      let gain=S.bet.amt*2;
      S.wallet+=gain;
      popup("YOU WIN<br>+"+gain);
      S.mybets.unshift(`#${S.period} ${S.bet.type} WIN +${gain}`);
    }else{
      popup("YOU LOST");
      S.mybets.unshift(`#${S.period} ${S.bet.type} LOSS`);
    }
    S.mybets=S.mybets.slice(0,10);
  }

  S.history.unshift(`#${S.period} â†’ ${win}`);
  S.history=S.history.slice(0,10);

  setTimeout(nextRound,4000);
}

/* ================= NEXT ROUND ================= */
function nextRound(){
  S.period++;
  S.phase="BET";
  S.time=30;
  S.bet=null;
  selected=null;
  bGOD.classList.remove("active");
  bDRAW.classList.remove("active");
  bDEVIL.classList.remove("active");
  godCard.innerText="GOD ?";
  devilCard.innerText="DEVIL ?";
  save();render();
}

/* ================= UTILS ================= */
function randomCard(){return Math.floor(Math.random()*13)+2}
function popup(t){
  popupText.innerHTML=t;
  popup.style.display="flex";
  setTimeout(()=>popup.style.display="none",2000);
}
function save(){localStorage.setItem("GDD",JSON.stringify(S))}
function render(){
  top.innerText=`Period: ${S.period} | Wallet: â‚¹${S.wallet.toFixed(2)}`;
  phaseText.innerText=S.phase==="BET"?"BET NOW":S.phase==="LOCK"?"LOCKED":"RESULT";
  timerText.innerText=S.time+"s";
  betBtn.className=S.phase==="LOCK"?"locked":"";
  history.innerHTML=S.history.join("<br>");
  mybets.innerHTML=S.mybets.join("<br>");
}
</script>

</body>
</html>
