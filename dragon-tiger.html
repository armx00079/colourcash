<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dragon Tiger</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
margin:0;font-family:Arial,sans-serif;
background:radial-gradient(circle at top,#0b1c2d,#030b14);
color:#fff;
}

/* HEADER */
.game-header{
background:linear-gradient(180deg,#2b1c3a,#1a1025);
padding:14px 10px 10px;
}
.header-arena{display:flex;align-items:center;justify-content:space-between}
.header-arena img{height:80px}
.center-cards{display:flex;align-items:center;gap:10px}

/* TOP CARDS */
.play-card{width:46px;height:62px;perspective:800px}
.play-card .inner{width:100%;height:100%;transform-style:preserve-3d;transition:.6s}
.play-card.flip .inner{transform:rotateY(180deg)}
.play-card .front,.play-card .back{
position:absolute;inset:0;backface-visibility:hidden;
border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:bold
}
.play-card .front{background:linear-gradient(135deg,#ffb85c,#ff8c1a)}
.play-card .back{background:#fff;color:#000;transform:rotateY(180deg)}

.bet-btn{
margin:10px auto 6px;width:220px;padding:12px 0;
border-radius:30px;background:linear-gradient(135deg,#ffcf6a,#ff9f1a);
color:#000;font-weight:bold;font-size:18px;text-align:center
}

/* LAST HISTORY */
.last-history{display:flex;justify-content:center;gap:6px;margin-bottom:6px}
.last-history span{
width:26px;height:26px;border-radius:50%;
display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold
}
.h-dragon{background:#4a5fe0}
.h-tiger{background:#ff8c1a}
.h-tie{background:#2ecc71}

/* TABLE */
.table-wrap{display:flex;justify-content:center;margin-top:20px}
.table{
width:360px;background:linear-gradient(#1a2f4a,#0b1c2d);
border-radius:18px;padding:18px
}
.cards{display:flex;justify-content:space-between;align-items:center}
.card,.tie{cursor:pointer;font-weight:bold;position:relative}
.card{
width:135px;height:95px;border-radius:16px;
display:flex;align-items:center;justify-content:center
}
.dragon{background:#4a5fe0}
.tiger{background:#ff8c1a}
.tie{
margin:14px auto 0;width:200px;height:70px;
border-radius:16px;background:#2ecc71;
display:flex;align-items:center;justify-content:center
}
.card.active,.tie.active{box-shadow:0 0 18px gold;transform:scale(1.03)}
.bet-amt{
position:absolute;top:6px;right:8px;
background:rgba(0,0,0,.6);padding:3px 8px;
border-radius:12px;font-size:13px;display:none
}

/* CHIPS */
.chips{display:flex;justify-content:center;gap:10px;margin:18px auto}
.chip{
width:46px;height:46px;border-radius:50%;
background:#ffd56a;color:#000;
display:flex;align-items:center;justify-content:center;
font-weight:bold;cursor:pointer
}
.chip.active{outline:3px solid #fff}
.locked{pointer-events:none;opacity:.4}

/* LIVE FEED */
.live-feed{
margin:10px auto;width:90%;max-width:360px;height:120px;
overflow:hidden;background:linear-gradient(#0e2238,#081423);
border-radius:16px;padding:10px
}
.live-item{font-size:14px;padding:5px 0}

/* POPUP */
.popup{position:fixed;inset:0;background:rgba(0,0,0,.6);
display:none;align-items:center;justify-content:center}
.popup-box{
background:linear-gradient(135deg,#ffd56a,#ff9f1a);
color:#000;padding:30px 50px;border-radius:20px;
font-size:26px;font-weight:bold
}

/* WALLET */
#walletBox{
position:fixed;bottom:12px;right:12px;
background:#000;padding:10px 18px;border-radius:22px;font-size:18px;font-weight:bold
}
</style>
</head>

<body>

<div id="walletBox">ðŸ’° â‚¹<span id="walletAmt">0</span></div>

<div class="game-header">
 <div class="header-arena">
  <img src="images/dragon.png">
  <div class="center-cards">
   <div class="play-card" id="topDragon"><div class="inner"><div class="front"></div><div class="back" id="dVal"></div></div></div>
   <div>VS</div>
   <div class="play-card" id="topTiger"><div class="inner"><div class="front"></div><div class="back" id="tVal"></div></div></div>
  </div>
  <img src="images/tiger.png">
 </div>
 <div class="bet-btn" id="betStatus"></div>
 <div class="last-history" id="lastHistory"></div>
</div>

<div class="table-wrap">
 <div class="table">
  <div class="cards">
   <div class="card dragon" id="dragon">DRAGON <span class="bet-amt" id="bet-dragon"></span></div>
   <div>VS</div>
   <div class="card tiger" id="tiger">TIGER <span class="bet-amt" id="bet-tiger"></span></div>
  </div>
  <div class="tie" id="tie">TIE <span class="bet-amt" id="bet-tie"></span></div>
 </div>
</div>

<div class="chips">
 <div class="chip">10</div><div class="chip">50</div>
 <div class="chip">100</div><div class="chip">500</div><div class="chip">1000</div>
</div>

<div class="live-feed" id="liveFeed"></div>
<div class="popup" id="popup"><div class="popup-box" id="popupText"></div></div>

<script>
/* ===== ELEMENTS ===== */
const walletAmt=document.getElementById("walletAmt");
const betStatus=document.getElementById("betStatus");
const topDragon=document.getElementById("topDragon");
const topTiger=document.getElementById("topTiger");
const dVal=document.getElementById("dVal");
const tVal=document.getElementById("tVal");

/* ===== STATE ===== */
let wallet=Number(localStorage.getItem("DT_WALLET")||5000);
let timer=Number(localStorage.getItem("DT_TIMER")||15);
let phase=localStorage.getItem("DT_PHASE")||"bet";
let history=JSON.parse(localStorage.getItem("DT_HISTORY")||"[]");
let liveFeedData=JSON.parse(localStorage.getItem("DT_LIVE")||"[]");
let selectedChip=0;
let bets={DRAGON:0,TIGER:0,TIE:0};

walletAmt.innerText=wallet;

/* ===== HISTORY ===== */
function renderHistory(){
 lastHistory.innerHTML="";
 history.slice(-8).forEach(h=>{
  const s=document.createElement("span");
  s.className=h=="DRAGON"?"h-dragon":h=="TIGER"?"h-tiger":"h-tie";
  s.innerText=h[0];
  lastHistory.appendChild(s);
 });
}
renderHistory();

/* ===== LIVE FEED ===== */
function renderLive(){
 liveFeed.innerHTML="";
 liveFeedData.forEach(t=>{
  const d=document.createElement("div");
  d.className="live-item";d.innerText=t;
  liveFeed.appendChild(d);
 });
}
renderLive();

setInterval(()=>{
 const a=[500,1000,2000,5000,10000][Math.floor(Math.random()*5)];
 liveFeedData.unshift("User placed bet â‚¹"+a);
 if(liveFeedData.length>6)liveFeedData.pop();
 localStorage.setItem("DT_LIVE",JSON.stringify(liveFeedData));
 renderLive();
},1000);

/* ===== CHIPS ===== */
document.querySelectorAll(".chip").forEach(c=>{
 c.onclick=()=>{
  if(phase!=="bet")return;
  document.querySelectorAll(".chip").forEach(x=>x.classList.remove("active"));
  c.classList.add("active");
  selectedChip=parseInt(c.innerText);
 };
});

/* ===== BET ===== */
["dragon","tiger","tie"].forEach(id=>{
 document.getElementById(id).onclick=()=>{
  if(phase!=="bet"||!selectedChip||wallet<selectedChip)return;
  wallet-=selectedChip;
  walletAmt.innerText=wallet;
  localStorage.setItem("DT_WALLET",wallet);
  bets[id.toUpperCase()]+=selectedChip;
  const b=document.getElementById("bet-"+id);
  b.innerText="â‚¹"+bets[id.toUpperCase()];
  b.style.display="block";
 };
});

/* ===== TIMER ===== */
function startTimer(){
 betStatus.innerText="START BETTING ("+(timer-5)+")";
 const t=setInterval(()=>{
  timer--;
  localStorage.setItem("DT_TIMER",timer);
  localStorage.setItem("DT_PHASE",phase);

  if(timer>5){
   phase="bet";
   betStatus.innerText="START BETTING ("+(timer-5)+")";
  }else if(timer>0){
   phase="lock";
   betStatus.innerText="BET LOCK ("+timer+")";
   document.querySelectorAll(".chip").forEach(c=>c.classList.add("locked"));
  }else{
   clearInterval(t);
   showResult();
  }
 },1000);
}

/* ===== RESULT ===== */
function showResult(){
 const CARDS=[{n:"A",v:14},{n:"K",v:13},{n:"Q",v:12},{n:"J",v:11},{n:"10",v:10},{n:"9",v:9}];
 const d=CARDS[Math.floor(Math.random()*CARDS.length)];
 const t=CARDS[Math.floor(Math.random()*CARDS.length)];

 dVal.innerText=d.n;tVal.innerText=t.n;
 topDragon.classList.add("flip");
 topTiger.classList.add("flip");

 let win="TIE";
 if(d.v>t.v)win="DRAGON";
 else if(t.v>d.v)win="TIGER";

 history.push(win);
 localStorage.setItem("DT_HISTORY",JSON.stringify(history));
 renderHistory();

 popupText.innerText=win+" WINS";
 popup.style.display="flex";

 setTimeout(()=>{
  popup.style.display="none";
  location.reload();
 },2000);
}

startTimer();
</script>

</body>
</html>
