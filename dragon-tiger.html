const el=document.getElementById(id);
el.onclick=()=>{
if(phase!=="bet"||!selectedChip||wallet<selectedChip)return;

document.querySelectorAll(".card,.tie").forEach(x=>x.classList.remove("active"));
el.classList.add("active");

wallet-=selectedChip;
walletAmt.innerText=wallet;
bets[id.toUpperCase()]+=selectedChip;

const b=document.getElementById("bet-"+id);
b.innerText="₹"+bets[id.toUpperCase()];
b.style.display="block";

saveGame();

};
});

/* TIMER */
function startTimer(){
const t=setInterval(()=>{
timer--;
if(timer>5){phase="bet";}
else if(timer>0){phase="lock";document.querySelectorAll(".chip").forEach(c=>c.classList.add("locked"));}
betStatus.innerText=timer>5?"START BETTING "+(timer-5):timer>0?"BET LOCK "+timer:"RESULT";
saveGame();
if(timer<=0){clearInterval(t); showResult();}
},1000);
}

/* RESULT */
function showResult(){
const d=CARDS[Math.floor(Math.random()*CARDS.length)];
const t=CARDS[Math.floor(Math.random()*CARDS.length)];
dVal.innerText=d.n; tVal.innerText=t.n;
topDragon.classList.add("flip"); topTiger.classList.add("flip");

let win="TIE";
if(d.v>t.v) win="DRAGON";
else if(t.v>d.v) win="TIGER";

if(bets[win]>0){
wallet+=bets[win]*MULTI[win];
walletAmt.innerText=wallet;
}

popupText.innerText=win+" WINS";
popup.style.display="flex";

saveGame();

setTimeout(()=>{popup.style.display="none"; resetRound();},2500);
}

/* RESET */
function resetRound(){
bets={DRAGON:0,TIGER:0,TIE:0};
timer=15; phase="bet";
document.querySelectorAll(".bet-amt").forEach(b=>b.style.display="none");
document.querySelectorAll(".chip").forEach(c=>c.classList.remove("active","locked"));
document.querySelectorAll(".card,.tie").forEach(x=>x.classList.remove("active"));
topDragon.classList.remove("flip"); topTiger.classList.remove("flip");
dVal.innerText=""; tVal.innerText="";
saveGame();
startTimer();
}

/* LIVE FEED */
setInterval(()=>{
const amt=[15000,20000,35000,50000,80000][Math.floor(Math.random()*5)];
const item=document.createElement("div");
item.className="live-item";
item.innerText="User just placed bet ₹"+amt;
liveFeed.prepend(item);
if(liveFeed.children.length>6) liveFeed.lastChild.remove();
},2000);

startTimer();
</script>  </body>

</html> 
