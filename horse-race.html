<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üêé Horse Race</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:url(images/bg/sky.png) no-repeat center/cover;
  color:#fff;
}

/* HEADER */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 16px;
  background:rgba(0,0,0,.35);
  font-size:20px;
  font-weight:bold;
}
.wallet{
  background:#0b8457;
  padding:6px 14px;
  border-radius:20px;
}

/* TIMER */
.timer-box{
  text-align:center;
  margin:12px 0;
}
.timer-box img{width:34px}
.timer{
  font-size:22px;
  font-weight:bold;
}
.bet-status{
  margin-top:4px;
  font-size:14px;
  color:#ffd54f;
}

/* HORSE BET PANEL */
.bet-panel{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  padding:14px;
}
.horse-card{
  background:#128c7e;
  border-radius:14px;
  padding:10px;
  display:flex;
  gap:10px;
  align-items:center;
  cursor:pointer;
}
.horse-card.active{
  outline:3px solid gold;
}
.horse-card img{
  width:70px;
}
.horse-info{font-size:14px}
.odds{opacity:.9}

/* TRACK */
.track{
  background:url(images/bg/track.png) no-repeat center/cover;
  margin:10px;
  border-radius:16px;
  padding:12px;
  height:260px;
  position:relative;
  overflow:hidden;
}
.horse-run{
  position:absolute;
  left:0;
  height:36px;
  transition:transform 2.5s linear;
}

/* CHIPS */
.chips{
  display:flex;
  justify-content:center;
  gap:12px;
  padding:12px;
}
.chip{
  width:56px;
  cursor:pointer;
}
.chip.active{transform:scale(1.15)}

/* HISTORY */
.history{
  padding:10px;
  text-align:center;
}
.ball{
  display:inline-block;
  width:26px;
  height:26px;
  line-height:26px;
  border-radius:50%;
  background:#333;
  margin:2px;
}

/* RESULT */
.result{
  text-align:center;
  font-size:18px;
  margin:8px;
}
.win{color:#4caf50}
.lose{color:#ff5252}
</style>
</head>

<body>

<div class="header">
  üêé HORSE RACE
  <div class="wallet">‚Çπ <span id="wallet">1000</span></div>
</div>

<div class="timer-box">
  <img src="images/ui/timer.png">
  <div class="timer" id="timer">15s</div>
  <div class="bet-status" id="betStatus">Place Your Bet</div>
</div>

<div class="bet-panel" id="betPanel"></div>

<div class="track" id="track"></div>

<div class="chips">
  <img src="images/chips/chip10.png" class="chip" data-value="10">
  <img src="images/chips/chip50.png" class="chip" data-value="50">
  <img src="images/chips/chip100.png" class="chip" data-value="100">
  <img src="images/chips/chip500.png" class="chip" data-value="500">
</div>

<div class="history" id="history"></div>
<div class="result" id="result"></div>

<script>
let wallet = 1000;
let selectedChip = 0;
let selectedHorse = null;
let timer = 15;
let bettingOpen = true;
let history = [];

const horses = [
 {id:1, odds:8.6},
 {id:2, odds:6.5},
 {id:3, odds:4.7},
 {id:4, odds:6.8},
 {id:5, odds:9.7},
 {id:6, odds:3.9}
];

const betPanel = document.getElementById("betPanel");
const track = document.getElementById("track");

/* RENDER HORSES */
horses.forEach(h=>{
  betPanel.innerHTML += `
  <div class="horse-card" data-id="${h.id}">
    <img src="images/horses/horse${h.id}.png">
    <div class="horse-info">
      Horse ${h.id}<br>
      <span class="odds">Odds ${h.odds}</span>
    </div>
  </div>`;
  track.innerHTML += `
    <img src="images/horses/horse${h.id}.png"
    class="horse-run" id="run${h.id}" style="top:${(h.id-1)*40}px">`;
});

/* CHIP SELECT */
document.querySelectorAll(".chip").forEach(c=>{
  c.onclick=()=>{
    document.querySelectorAll(".chip").forEach(x=>x.classList.remove("active"));
    c.classList.add("active");
    selectedChip = +c.dataset.value;
  }
});

/* HORSE SELECT */
document.querySelectorAll(".horse-card").forEach(card=>{
  card.onclick=()=>{
    if(!bettingOpen || !selectedChip) return;
    document.querySelectorAll(".horse-card").forEach(x=>x.classList.remove("active"));
    card.classList.add("active");
    selectedHorse = +card.dataset.id;
  }
});

/* TIMER */
const timerInt = setInterval(()=>{
  timer--;
  document.getElementById("timer").innerText = timer+"s";

  if(timer<=3){
    bettingOpen=false;
    document.getElementById("betStatus").innerText="Bet Closed";
  }

  if(timer===0){
    clearInterval(timerInt);
    startRace();
  }
},1000);

/* RACE */
function startRace(){
  const winner = Math.floor(Math.random()*6)+1;

  horses.forEach(h=>{
    document.getElementById("run"+h.id)
      .style.transform = `translateX(${h.id===winner?260:200}px)`;
  });

  setTimeout(()=>{
    resolve(winner);
  },2600);
}

/* RESULT */
function resolve(winner){
  let res = document.getElementById("result");

  if(selectedHorse===winner){
    let odd = horses.find(h=>h.id===winner).odds;
    let win = selectedChip * odd;
    wallet += win;
    res.innerHTML = `<span class="win">You Win ‚Çπ${win.toFixed(0)}</span>`;
  }else{
    wallet -= selectedChip;
    res.innerHTML = `<span class="lose">You Lose</span>`;
  }

  document.getElementById("wallet").innerText = wallet;

  history.unshift(winner);
  history = history.slice(0,10);
  document.getElementById("history").innerHTML =
    history.map(n=>`<span class="ball">${n}</span>`).join("");
}
</script>

</body>
</html>
