<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Treasure Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#1b0f08;
  color:#fff;
}

/* ===== HEADER ===== */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px;
  background:#2a160c;
}
.wallet{
  background:#3b220f;
  padding:6px 14px;
  border-radius:16px;
  font-weight:bold;
}

/* ===== BOARD ===== */
.board{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:14px;
  padding:20px;
}
.chest{
  background:#5a2d12;
  border-radius:14px;
  height:72px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  cursor:pointer;
  transition:.2s;
}
.chest.disabled{
  pointer-events:none;
  opacity:.5;
}
.chest.open{
  background:#8a4a1d;
}

/* ===== CONTROLS ===== */
.controls{
  padding:15px;
  background:#2a160c;
}
.bet-row{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:10px;
}
.bet-row button{
  width:38px;
  height:38px;
  border-radius:50%;
  border:none;
  font-size:20px;
}
.bet{
  background:#3b220f;
  padding:8px 18px;
  border-radius:18px;
}
.start{
  margin-top:12px;
  width:100%;
  padding:14px;
  background:#ffb43b;
  color:#000;
  border:none;
  border-radius:18px;
  font-weight:bold;
  font-size:16px;
}
.cashout{
  margin-top:10px;
  width:100%;
  padding:12px;
  background:#00d084;
  color:#000;
  border:none;
  border-radius:18px;
  font-weight:bold;
  display:none;
}

/* ===== RESULT POPUP ===== */
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.popup-box{
  background:#2a160c;
  padding:25px;
  border-radius:18px;
  text-align:center;
}
.popup-box h2{
  margin:0 0 10px;
  color:#00ff9c;
}
.popup-box button{
  margin-top:12px;
  padding:10px 20px;
  border:none;
  border-radius:14px;
  background:#ffb43b;
  font-weight:bold;
}
</style>
</head>

<body>

<div class="header">
  <div>TREASURE</div>
  <div class="wallet">â‚¹ <span id="wallet">680</span></div>
</div>

<div class="board" id="board"></div>

<div class="controls">
  <div class="bet-row">
    <button onclick="changeBet(-10)">âˆ’</button>
    <div class="bet">Bet â‚¹ <span id="bet">90</span></div>
    <button onclick="changeBet(10)">+</button>
  </div>

  <button class="start" id="startBtn" onclick="startGame()">START GAME</button>
  <button class="cashout" id="cashoutBtn" onclick="cashOut()">CASH OUT</button>
</div>

<!-- POPUP -->
<div class="popup" id="popup">
  <div class="popup-box">
    <h2>ðŸŽ‰ CASHED OUT</h2>
    <div>You won â‚¹ <span id="popupAmount"></span></div>
    <button onclick="closePopup()">OK</button>
  </div>
</div>

<script>
let wallet = 680;
let bet = 90;
let gameActive = false;
let currentWin = 0;
let chestData = [];

const board = document.getElementById("board");
const walletUI = document.getElementById("wallet");
const betUI = document.getElementById("bet");
const startBtn = document.getElementById("startBtn");
const cashoutBtn = document.getElementById("cashoutBtn");
const popup = document.getElementById("popup");
const popupAmount = document.getElementById("popupAmount");

/* ===== INIT ===== */
function initBoard(){
  board.innerHTML="";
  for(let i=0;i<20;i++){
    const c=document.createElement("div");
    c.className="chest";
    c.innerText="ðŸ§°";
    c.onclick=()=>openChest(i,c);
    board.appendChild(c);
  }
}
initBoard();

/* ===== START ===== */
function startGame(){
  if(bet>wallet) return alert("Low balance");
  wallet-=bet;
  currentWin=bet;
  updateUI();

  gameActive=true;
  startBtn.innerText="â‚¹ "+currentWin;
  cashoutBtn.style.display="block";

  chestData=[];
  for(let i=0;i<20;i++){
    const r=Math.random();
    if(r<0.3) chestData.push("BOOM");
    else if(r<0.6) chestData.push("EMPTY");
    else chestData.push("2X");
  }
  initBoard();
}

/* ===== OPEN CHEST ===== */
function openChest(i,el){
  if(!gameActive) return;
  el.classList.add("open","disabled");

  const type=chestData[i];

  if(type==="BOOM"){
    el.innerText="ðŸ’£";
    gameOver();
  }
  if(type==="EMPTY"){
    el.innerText="ðŸ“¦";
  }
  if(type==="2X"){
    el.innerText="2Ã—";
    currentWin*=2;
    startBtn.innerText="â‚¹ "+currentWin;
  }
}

/* ===== CASHOUT ===== */
function cashOut(){
  if(!gameActive) return;
  wallet+=currentWin;
  popupAmount.innerText=currentWin;
  popup.style.display="flex";
  resetGame();
}

/* ===== GAME OVER ===== */
function gameOver(){
  gameActive=false;
  cashoutBtn.style.display="none";
  startBtn.innerText="START GAME";
  document.querySelectorAll(".chest").forEach(c=>c.classList.add("disabled"));
  setTimeout(initBoard,1500);
}

/* ===== RESET ===== */
function resetGame(){
  gameActive=false;
  cashoutBtn.style.display="none";
  startBtn.innerText="START GAME";
  updateUI();
  initBoard();
}

/* ===== HELPERS ===== */
function changeBet(v){
  bet+=v;
  if(bet<10) bet=10;
  if(bet>wallet) bet=wallet;
  betUI.innerText=bet;
}
function updateUI(){
  walletUI.innerText=wallet;
}
function closePopup(){
  popup.style.display="none";
}
</script>

</body>
</html>
