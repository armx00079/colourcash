<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vortex-Like Game - 40% House Edge Version</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #111; color: #fff; }
    #game { margin: 20px auto; width: 400px; height: 400px; border: 2px solid #444; border-radius: 50%; background: #222; position: relative; overflow: hidden; }
    .symbol { position: absolute; width: 50px; height: 50px; border-radius: 50%; font-size: 30px; line-height: 50px; text-align: center; }
    #bars { margin: 20px; }
    .bar { height: 20px; background: #333; margin: 10px; position: relative; }
    .fill { height: 100%; background: linear-gradient(to right, #00f, #0f0); width: 0%; transition: width 0.3s; }
    #multiplier { font-size: 40px; color: gold; }
    #log { margin: 20px; height: 150px; overflow-y: auto; background: #000; padding: 10px; border: 1px solid #555; }
  </style>
</head>
<body>
  <h1>Vortex Style Game (Custom - 40% House Edge)</h1>
  <div id="game"></div>
  <div id="bars">
    <div>Water Bar: <div class="bar"><div id="water" class="fill"></div></div></div>
    <div>Earth Bar: <div class="bar"><div id="earth" class="fill"></div></div></div>
    <div>Fire Bar:  <div class="bar"><div id="fire" class="fill"></div></div></div>
  </div>
  <div>Current Multiplier: <span id="multiplier">1.00x</span></div>
  <button onclick="startRound()" style="padding:15px 30px; font-size:20px; margin:20px;">Spin / New Round</button>
  <div id="log"></div>

  <script>
    const elements = [
      { type: 'Water', emoji: 'ðŸ’§', mult: [1.55, 2, 3, 5, 10] },     // safe
      { type: 'Earth', emoji: 'ðŸŒ', mult: [2.5, 5, 10, 50, 200] },   // medium
      { type: 'Fire',  emoji: 'ðŸ”¥', mult: [10, 20, 52, 100, 500] },  // high risk + bonus trigger
      { type: 'Wind',  emoji: 'ðŸŒ¬ï¸', mult: [] },                      // nothing
      { type: 'Skull', emoji: 'ðŸ’€', mult: [] }                       // reset
    ];

    // For 40% house edge â†’ RTP 60% â†’ symbols ko biased banao (Skull & Wind zyada aaye)
    // Original ~ equal chance, yahan Skull/Wind ~55-60% chance, good symbols kam
    const symbolWeights = [8, 8, 6, 30, 48]; // Water, Earth, Fire, Wind, Skull (total 100)

    let waterProgress = 0, earthProgress = 0, fireProgress = 0;
    let currentMult = 1.0;
    let interval;

    function weightedRandom() {
      let sum = symbolWeights.reduce((a,b)=>a+b,0);
      let r = Math.random() * sum;
      let current = 0;
      for(let i=0; i<symbolWeights.length; i++){
        current += symbolWeights[i];
        if(r <= current) return elements[i];
      }
    }

    function log(msg) {
      document.getElementById('log').innerHTML += msg + '<br>';
      document.getElementById('log').scrollTop = document.getElementById('log').scrollHeight;
    }

    function startRound() {
      // Reset
      waterProgress = earthProgress = fireProgress = 0;
      currentMult = 1.0;
      document.getElementById('multiplier').innerText = '1.00x';
      document.getElementById('water').style.width = '0%';
      document.getElementById('earth').style.width = '0%';
      document.getElementById('fire').style.width = '0%';
      document.getElementById('game').innerHTML = '';
      document.getElementById('log').innerHTML = '';

      log('Round started! Bet lagao mentally...');

      let drops = 0;
      interval = setInterval(() => {
        drops++;
        const sym = weightedRandom();

        // Drop symbol in circle
        const angle = Math.random() * 360;
        const dist = 120 + Math.random() * 100;
        const x = 200 + Math.cos(angle * Math.PI/180) * dist - 25;
        const y = 200 + Math.sin(angle * Math.PI/180) * dist - 25;

        const div = document.createElement('div');
        div.className = 'symbol';
        div.innerText = sym.emoji;
        div.style.left = x + 'px';
        div.style.top = y + 'px';
        div.style.background = sym.type === 'Skull' ? 'red' : sym.type === 'Fire' ? 'orange' : '#444';
        document.getElementById('game').appendChild(div);

        // Progress logic
        if (sym.type === 'Skull') {
          waterProgress = earthProgress = fireProgress = 0;
          log('ðŸ’€ Skull! All progress reset!');
        } else if (sym.type === 'Wind') {
          log('ðŸŒ¬ï¸ Wind - Nothing happens');
        } else {
          let added = 0;
          if (sym.type === 'Water') { waterProgress += 1; added = waterProgress; document.getElementById('water').style.width = (waterProgress * 10) + '%'; }
          if (sym.type === 'Earth') { earthProgress += 1; added = earthProgress; document.getElementById('earth').style.width = (earthProgress * 10) + '%'; }
          if (sym.type === 'Fire')  { fireProgress += 1;  added = fireProgress;  document.getElementById('fire').style.width = (fireProgress * 10) + '%'; }

          // Random multiplier from range
          const mults = sym.mult;
          const thisMult = mults[Math.floor(Math.random() * mults.length)];
          currentMult = Math.max(currentMult, thisMult); // progressive
          document.getElementById('multiplier').innerText = currentMult.toFixed(2) + 'x';

          log(`${sym.emoji} ${sym.type} added! Bar: ${added}/10 | Mult now: ${currentMult.toFixed(2)}x`);
        }

        // Check win conditions
        if (waterProgress >= 10 || earthProgress >= 10 || fireProgress >= 10) {
          clearInterval(interval);
          let bonus = '';
          if (fireProgress >= 10) {
            bonus = ' ðŸ”¥ FIRE FULL! Bonus x' + (100 + Math.floor(Math.random()*400)) + ' to x700 possible!';
          }
          log(`Vortex hit! Final Mult: ${currentMult.toFixed(2)}x ${bonus}`);
          log('Round over. House edge heavy hai bhai â€“ 40% designed!');
          return;
        }

        if (drops > 200) { // safety
          clearInterval(interval);
          log('Round timeout â€“ no Vortex this time!');
        }
      }, 800); // speed adjust kar sakta hai
    }
  </script>
</body>
</html>
