<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üé° Roulette</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
/* ===== TERA CSS ‚Äì UNCHANGED ===== */
body{margin:0;font-family:Arial;background:#0e3b2f;color:#fff}
.header{text-align:center;padding:14px;font-size:22px;font-weight:bold}
.card{background:#0f5132;margin:10px;padding:12px;border-radius:14px}
.center{text-align:center}
.timer{font-size:22px;color:#ffd54f}
.lock{color:#ffcc00;margin-top:6px}
.wheel-wrap{display:flex;justify-content:center;margin:20px 0}
.wheel{width:300px;height:300px;border-radius:50%;border:14px solid #111;
background:repeating-conic-gradient(#c62828 0deg 10deg,#111 10deg 20deg);
box-shadow:inset 0 0 25px rgba(0,0,0,.9);
transition:transform 4.5s cubic-bezier(.22,.61,.36,1);position:relative}
.wheel span{position:absolute;top:50%;left:50%;transform-origin:0 0;font-size:13px;font-weight:bold}
.grid{display:grid;grid-template-columns:repeat(6,1fr);gap:6px}
.num{padding:12px 0;border-radius:8px;font-weight:bold;text-align:center;cursor:pointer}
.red{background:#c62828}.black{background:#111}.green{background:#2e7d32}
.num.active{outline:3px solid #00e5ff}
.controls{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px}
.ctrl{background:#333;padding:12px;border-radius:10px;text-align:center;font-weight:bold;cursor:pointer}
.ctrl.active{outline:3px solid #00e5ff;background:#555}
input{width:100%;padding:12px;margin-top:10px;border:none;border-radius:10px}
button{width:100%;padding:14px;margin-top:10px;border:none;border-radius:12px;background:#2196f3;color:#fff;font-size:16px;font-weight:bold}
button:disabled{opacity:.5}
.history{font-size:14px;line-height:1.6;margin-top:6px}
.popup{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:50}
.popup div{background:#1b1b1b;padding:22px;border-radius:14px;font-size:18px}
.win{color:#4caf50}.lose{color:#ff5252}.warn{color:#ff5252}
.blur{filter:blur(3px);pointer-events:none}
</style>
</head>

<body>

<div class="header">üé° ROULETTE</div>

<div class="card center">
  <div id="wallet">Wallet: ‚Çπ0</div>
  <div class="timer" id="timer">25s</div>
  <div id="lockText"></div>
</div>

<div class="wheel-wrap">
  <div id="wheel" class="wheel"></div>
</div>

<div class="card" id="game">
  <div class="grid" id="numbers"></div>

  <div class="controls">
    <div class="ctrl" onclick="selectGroup('RED',this)">RED</div>
    <div class="ctrl" onclick="selectGroup('BLACK',this)">BLACK</div>
    <div class="ctrl" onclick="selectGroup('EVEN',this)">EVEN</div>
    <div class="ctrl" onclick="selectGroup('ODD',this)">ODD</div>
    <div class="ctrl" onclick="selectGroup('LOW',this)">1‚Äì18</div>
    <div class="ctrl" onclick="selectGroup('HIGH',this)">19‚Äì36</div>
  </div>

  <input id="amount" type="number" placeholder="Min ‚Çπ1">
  <button onclick="placeBet()">PLACE BET</button>
</div>

<div class="card">
  <b>Last Results</b>
  <div class="history" id="last"></div>
</div>

<div class="card">
  <b>My Bets</b>
  <div class="history" id="bets"></div>
</div>

<div class="popup" id="popup"><div id="popupText"></div></div>

<!-- üî• FIREBASE WALLET ONLY ADDITION -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, query, where, getDocs, doc, updateDoc }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig={
  apiKey:"YOUR_API_KEY",
  authDomain:"YOUR_DOMAIN",
  projectId:"YOUR_PROJECT_ID"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

const email=localStorage.getItem("userEmail");
let uid="";

async function loadWallet(){
  const q=query(collection(db,"users"),where("email","==",email));
  const snap=await getDocs(q);
  snap.forEach(d=>{
    uid=d.id;
    state.wallet=d.data().balance||0;
    render();
  });
}

function syncWallet(){
  if(uid){
    updateDoc(doc(db,"users",uid),{balance:state.wallet});
  }
}

loadWallet();
</script>

<script>
/* ===== TERA JS ‚Äì LOGIC UNCHANGED ===== */
let state=JSON.parse(localStorage.getItem("roulette_state"))||{
  wallet:0,phase:"BET",time:25,selected:null,bets:[],last:[]
};
const save=()=>localStorage.setItem("roulette_state",JSON.stringify(state));

/* ‚ö†Ô∏è SIRF YE 2 LINE ADD HUI HAIN */
const oldPlaceBet=placeBet;
placeBet=function(){
  oldPlaceBet();
  syncWallet();
};

const oldSpin=spin;
spin=function(){
  oldSpin();
  syncWallet();
};
</script>

</body>
</html>
