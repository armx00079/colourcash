<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel â€“ Deposit Approval</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f0f0f;
  color:#fff;
}
.header{
  padding:15px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
  background:#111;
}
.container{
  padding:15px;
}
.card{
  background:#1c1c1c;
  border-radius:14px;
  padding:15px;
  margin-bottom:15px;
}
.row{
  font-size:14px;
  margin-bottom:6px;
  opacity:.9;
}
.actions{
  display:flex;
  gap:10px;
  margin-top:10px;
}
.btn{
  flex:1;
  padding:10px;
  border:none;
  border-radius:10px;
  font-size:14px;
  cursor:pointer;
}
.approve{background:#4caf50;color:#fff}
.reject{background:#f44336;color:#fff}
.status{
  margin-top:8px;
  font-size:13px;
}
.empty{
  text-align:center;
  opacity:.6;
  margin-top:50px;
}
</style>
</head>

<body>

<div class="header">ðŸ›  Admin Panel â€“ Deposit Requests</div>

<div class="container" id="list"></div>

<script>
/* GET DATA */
let deposits = JSON.parse(localStorage.getItem("depositRequests")) || [];
let balance = Number(localStorage.getItem("balance")) || 0;
let totalDeposit = Number(localStorage.getItem("totalDeposit")) || 0;

const list = document.getElementById("list");

function render(){
  list.innerHTML = "";
  if(deposits.length === 0){
    list.innerHTML = `<div class="empty">No pending deposits</div>`;
    return;
  }

  deposits.forEach((d,i)=>{
    let div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <div class="row"><b>Amount:</b> â‚¹${d.amount}</div>
      <div class="row"><b>UTR:</b> ${d.utr}</div>
      <div class="row"><b>Status:</b> ${d.status}</div>

      ${d.status==="Pending" ? `
      <div class="actions">
        <button class="btn approve" onclick="approve(${i})">Approve</button>
        <button class="btn reject" onclick="reject(${i})">Reject</button>
      </div>` : `
      <div class="status">âœ” Action taken</div>
      `}
    `;
    list.appendChild(div);
  });
}

function approve(i){
  let amt = Number(deposits[i].amount);
  deposits[i].status = "Approved";

  balance += amt;
  totalDeposit += amt;

  localStorage.setItem("balance",balance);
  localStorage.setItem("totalDeposit",totalDeposit);
  localStorage.setItem("depositRequests",JSON.stringify(deposits));

  render();
}

function reject(i){
  deposits[i].status = "Rejected";
  localStorage.setItem("depositRequests",JSON.stringify(deposits));
  render();
}

render();
</script>

</body>
</html>
