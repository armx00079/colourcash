<!DOCTYPE html>  <html lang="en">  
<head>  
<meta charset="UTF-8">  
<title>Admin Panel ‚Äì draxbet </title>  
<meta name="viewport" content="width=device-width, initial-scale=1">  
<style>  
body{margin:0;font-family:Arial;background:linear-gradient(180deg,#e3f2fd,#bbdefb);  
header{  
  background:linear-gradient(135deg,#ff6a6a,#ff8e8e);  
  padding:18px;  
  text-align:center;  
  font-size:22px;  
  font-weight:bold  
}  
.dashboard{  
  display:grid;  
  grid-template-columns:repeat(3,1fr);  
  gap:12px;  
  padding:15px  
}  
.d-card{  
  background:#1c1c1c;  
  border-radius:14px;  
  padding:14px;  
  text-align:center  
}  
.d-card h2{margin:0;font-size:22px;color:#ff8e8e}  
.d-card span{font-size:12px;color:#aaa}  
.profit{  
  display:grid;  
  grid-template-columns:repeat(3,1fr);  
  gap:12px;  
  padding:0 15px 15px  
}  
.p-card{  
  background:#121212;  
  border-radius:14px;  
  padding:14px;  
  text-align:center;  
  border:1px solid #222  
}  
.p-card h3{margin:0;font-size:18px}  
.p-card span{font-size:12px;color:#aaa}  
.tabs{display:flex;background:#111}  
.tab{  
  flex:1;padding:14px;text-align:center;  
  cursor:pointer;color:#aaa;font-weight:bold  
}  
.tab.active{background:#1c1c1c;color:#ff8e8e}  
.section{display:none;padding:15px}  
.section.active{display:block}  
.card{  
  background:#1c1c1c;  
  border-radius:16px;  
  padding:16px;  
  margin-bottom:14px  
}  
.row{display:flex;justify-content:space-between;font-size:14px;margin:6px 0}  
.btn{  
  padding:6px 10px;  
  border:none;  
  border-radius:8px;  
  font-weight:bold;  
  cursor:pointer  
}  
.plus{background:#2e7d32;color:#fff}  
.minus{background:#c62828;color:#fff}  
@media(max-width:600px){  
  .dashboard,.profit{grid-template-columns:1fr}  
}  
</style>  
</head>  <body>  <header>üõ†Ô∏è draxbet üßë‚Äçüíº‚Äì Admin Panel</header>  <div class="dashboard">  
  <div class="d-card"><h2 id="totalUsers">0</h2><span>Total Users</span></div>  
  <div class="d-card"><h2 id="pendingDeposits">0</h2><span>Pending Deposits</span></div>  
  <div class="d-card"><h2 id="pendingWithdraws">0</h2><span>Pending Withdraws</span></div>  
</div>  <div class="profit">  
  <div class="p-card"><h3 id="totalDepositAmt">‚Çπ0</h3><span>Total Deposit</span></div>  
  <div class="p-card"><h3 id="totalWithdrawAmt">‚Çπ0</h3><span>Total Withdraw</span></div>  
  <div class="p-card"><h3 id="netProfit">‚Çπ0</h3><span>Net Profit</span></div>  
</div>  <div class="tabs">  
  <div class="tab active" onclick="openTab(0)">Deposits</div>  
  <div class="tab" onclick="openTab(1)">Withdraws</div>  
  <div class="tab" onclick="openTab(2)">Users</div>  
  <div class="tab" onclick="openTab(3)">House Edge</div>
</div>  <div class="section active" id="sec0"></div>  
<div class="section" id="sec1"></div>  
<div class="section" id="sec2"></div>  <script type="module">  
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";  
import { getFirestore, collection, getDocs, updateDoc, doc } from  
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";  
  
const app = initializeApp({  
  apiKey:"AIzaSyBx3J9aGn_98rTPgurMMKw_GR3puIMj4Ms",  
  authDomain:"colourcash-ea60e.firebaseapp.com",  
  projectId:"colourcash-ea60e"  
});  
const db = getFirestore(app);  
  
window.openTab=i=>{  
  document.querySelectorAll(".tab").forEach((t,n)=>t.classList.toggle("active",n===i));  
  document.querySelectorAll(".section").forEach((s,n)=>s.classList.toggle("active",n===i));  
};  
  
async function loadDashboard(){  
  const users=await getDocs(collection(db,"users"));  
  const dep=await getDocs(collection(db,"deposits"));  
  const wd=await getDocs(collection(db,"withdraws"));  
  
  totalUsers.innerText=users.size;  
  pendingDeposits.innerText=dep.docs.filter(d=>d.data().status==="PENDING").length;  
  pendingWithdraws.innerText=wd.docs.filter(d=>d.data().status==="PENDING").length;  
  
  let depSum=0, wdSum=0;  
  dep.docs.forEach(d=>{ if(d.data().status==="APPROVED") depSum+=d.data().amount });  
  wd.docs.forEach(d=>{ if(d.data().status==="APPROVED") wdSum+=d.data().amount });  
  
  totalDepositAmt.innerText="‚Çπ"+depSum;  
  totalWithdrawAmt.innerText="‚Çπ"+wdSum;  
  netProfit.innerText="‚Çπ"+(depSum-wdSum);  
}  
  
/* USERS */  
async function loadUsers(){  
  const box=sec2;  
  const snap=await getDocs(collection(db,"users"));  
  box.innerHTML="";  
  snap.forEach(d=>{  
    const u=d.data();  
    box.innerHTML+=`  
      <div class="card">  
        <div class="row"><span>${u.email}</span><span>‚Çπ${u.balance||0}</span></div>  
        <div class="row"><span>Password</span><span>${u.password || "N/A"}</span></div>  
        <div class="row">  
          <button class="btn plus" onclick="updateBal('${d.id}',100)">+100</button>  
          <button class="btn minus" onclick="updateBal('${d.id}',-100)">-100</button>  
        </div>  
      </div>`;  
  });  
}  
  
window.updateBal=async(id,amt)=>{  
  const ref=doc(db,"users",id);  
  const snap=await getDocs(collection(db,"users"));  
  snap.forEach(async d=>{  
    if(d.id===id){  
      await updateDoc(ref,{balance:(d.data().balance||0)+amt});  
      loadUsers();loadDashboard();  
    }  
  });  
};  
  
/* DEPOSITS */  
async function loadDeposits(){  
  const box=sec0;  
  const snap=await getDocs(collection(db,"deposits"));  
  box.innerHTML="";  
  snap.forEach(d=>{  
    const x=d.data();  
    if(x.status!=="PENDING")return;  
    box.innerHTML+=`  
      <div class="card">  
        <div class="row"><span>${x.email}</span><span>‚Çπ${x.amount}</span></div>  
        <div class="row"><span>UTR</span><span>${x.utr}</span></div>  
        <div class="row">  
          <button class="btn plus" onclick="approveDeposit('${d.id}','${x.email}',${x.amount})">Approve</button>  
          <button class="btn minus" onclick="rejectDeposit('${d.id}')">Reject</button>  
        </div>  
      </div>`;  
  });  
}  
  
window.approveDeposit=async(id,email,amt)=>{  
  await updateDoc(doc(db,"deposits",id),{status:"APPROVED"});  
  const users=await getDocs(collection(db,"users"));  
  users.forEach(async u=>{  
    if(u.data().email===email){  
      await updateDoc(doc(db,"users",u.id),{  
        balance:(u.data().balance||0)+amt  
      });  
    }  
  });  
  loadDeposits();loadDashboard();  
};  
  
window.rejectDeposit=async id=>{  
  await updateDoc(doc(db,"deposits",id),{status:"REJECTED"});  
  loadDeposits();loadDashboard();  
};  
  
/* WITHDRAWS */  
async function loadWithdraws(){  
  const box=sec1;  
  const snap=await getDocs(collection(db,"withdraws"));  
  box.innerHTML="";  
  snap.forEach(d=>{  
    const w=d.data();  
    if(w.status!=="PENDING")return;  
  
    let details = "";  
    if(w.method==="UPI"){  
      details = `<div class="row"><span>UPI</span><span>${w.upiId}</span></div>`;  
    }else{  
      details = `  
        <div class="row"><span>Holder</span><span>${w.bankDetails.holder}</span></div>  
        <div class="row"><span>Bank</span><span>${w.bankDetails.bank}</span></div>  
        <div class="row"><span>Account</span><span>${w.bankDetails.account}</span></div>  
        <div class="row"><span>IFSC</span><span>${w.bankDetails.ifsc}</span></div>`;  
    }  
  
    box.innerHTML+=`  
      <div class="card">  
        <div class="row"><span>${w.email}</span><span>‚Çπ${w.amount}</span></div>  
        <div class="row"><span>Order ID</span><span>${w.orderId || "N/A"}</span></div>  
        <div class="row"><span>Time</span><span>${w.time || "N/A"}</span></div>  
        ${details}  
        <div class="row">  
          <button class="btn plus" onclick="approveWithdraw('${d.id}')">Approve</button>  
          <button class="btn minus" onclick="rejectWithdraw('${d.id}')">Reject</button>  
        </div>  
      </div>`;  
  });  
}  
  
window.approveWithdraw=async id=>{  
  await updateDoc(doc(db,"withdraws",id),{status:"APPROVED"});  
  loadWithdraws();loadDashboard();  
};  
  
window.rejectWithdraw=async id=>{  
  await updateDoc(doc(db,"withdraws",id),{status:"REJECTED"});  
  loadWithdraws();loadDashboard();  
};  
  
loadDashboard();  
loadUsers();  
loadDeposits();  
loadWithdraws();  
</script>  </body>  
</html>
