<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Aviator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;background:#0f0f0f;font-family:Arial;color:#fff;text-align:center}
.card{background:#1c1c1c;border-radius:16px;padding:16px;margin:15px}
button{width:100%;padding:14px;border:none;border-radius:12px;font-size:16px;color:#fff}
.blue{background:#2196f3}
.pink{background:#e91e63}
input{width:100%;padding:12px;border-radius:10px;border:none;font-size:16px}
.popup{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center}
.popup .box{background:#222;padding:20px;border-radius:14px;width:80%}
</style>
</head>

<body>

<h2>‚úàÔ∏è AVIATOR</h2>

<div class="card">
  <div>Period: <b id="period"></b> | Wallet: ‚Çπ<b id="wallet"></b></div>
  <h1 id="status" style="color:#00e676">WAIT</h1>
  <h2 id="timer">30s</h2>
  <h1 id="multiplier">1.00x</h1>
</div>

<div class="card">
  <input id="betInput" placeholder="Min ‚Çπ1" type="number">
  <br><br>
  <button class="blue" id="betBtn">PLACE BET</button>
  <br><br>
  <button class="pink" id="cashBtn" disabled>CASH OUT</button>
</div>

<div class="card">
  <button class="pink" onclick="showHistory()">Game History</button>
  <br><br>
  <button class="pink" onclick="showMyBets()">My Bets</button>
</div>

<div class="card">
  <h3>Last 10 Games</h3>
  <div id="list"></div>
</div>

<div class="popup" id="popup">
  <div class="box">
    <h3 id="popupText"></h3>
    <button class="pink" onclick="popup.style.display='none'">OK</button>
  </div>
</div>

<script>
let wallet=Number(localStorage.wallet||100);
let period=Number(localStorage.period||1000);
let history=JSON.parse(localStorage.history||"[]");
let bets=JSON.parse(localStorage.bets||"[]");

let phase="WAIT",time=30,multi=1,crash=0,bet=null,loop;

updateUI();
start();

function start(){
  phase="WAIT";time=30;multi=1;
  crash=(Math.random()*3+1.2).toFixed(2);
  bet=null;
  cashBtn.disabled=true;
  betBtn.disabled=false;
  loop=setInterval(tick,100);
}

function tick(){
  if(phase==="WAIT"){
    time-=0.1;
    if(time<=5) betBtn.disabled=true;
    if(time<=0){phase="FLY";status.innerText="FLYING";cashBtn.disabled=!bet;}
  }
  else if(phase==="FLY"){
    multi+=0.02;
    if(multi>=crash) end();
  }
  updateUI();
}

function end(){
  clearInterval(loop);
  if(bet&&!bet.cash){
    bet.result="LOSS";
    bets.unshift(bet);
    popupMsg("üí• Crash @ "+crash+"x");
  }
  history.unshift({p:period,c:crash});
  history=history.slice(0,10);
  save();
  setTimeout(()=>{period++;start()},2000);
}

betBtn.onclick=()=>{
  let amt=Number(betInput.value);
  if(amt<1||amt>wallet) return popupMsg("Invalid Bet");
  wallet-=amt;
  bet={p:period,a:amt,cash:false};
  popupMsg("Bet Placed ‚Çπ"+amt);
  save();
};

cashBtn.onclick=()=>{
  if(!bet||bet.cash) return;
  bet.cash=true;
  let win=(bet.a*multi).toFixed(2);
  wallet+=Number(win);
  bet.result="WIN @ "+multi.toFixed(2)+"x";
  bets.unshift(bet);
  popupMsg("üéâ Won ‚Çπ"+win);
  save();
};

function updateUI(){
  periodEl.innerText=period;
  walletEl.innerText=wallet.toFixed(2);
  timer.innerText=Math.max(0,Math.floor(time))+"s";
  multiplier.innerText=multi.toFixed(2)+"x";
}

function showHistory(){
  list.innerHTML=history.map(h=>`#${h.p} ‚Üí ${h.c}x`).join("<br>");
}
function showMyBets(){
  list.innerHTML=bets.map(b=>`#${b.p} ‚Çπ${b.a} ‚Üí ${b.result}`).join("<br>");
}

function popupMsg(t){
  popupText.innerText=t;
  popup.style.display="flex";
}

function save(){
  localStorage.wallet=wallet;
  localStorage.period=period;
  localStorage.history=JSON.stringify(history);
  localStorage.bets=JSON.stringify(bets);
}
</script>
</body>
</html>
