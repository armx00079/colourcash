<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Aviator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0b0b0b;
  color:#fff;
  text-align:center;
}

/* HEADER */
.header{
  padding:15px;
  font-size:22px;
  font-weight:bold;
}

/* MAIN CARD */
.card{
  background:#1c1c1c;
  margin:15px;
  border-radius:16px;
  padding:20px;
}

/* MULTIPLIER */
.multiplier{
  font-size:48px;
  font-weight:bold;
  color:#00ff99;
}
.crashed{
  color:#ff5252;
}

/* INPUT */
input{
  width:100%;
  padding:14px;
  border-radius:10px;
  border:none;
  font-size:18px;
  margin-top:10px;
}

/* BUTTONS */
.btn{
  margin-top:12px;
  padding:14px;
  border-radius:12px;
  font-size:18px;
  border:none;
  cursor:pointer;
}
.bet{
  background:#2196f3;
  color:#fff;
}
.cashout{
  background:#00c853;
  color:#000;
}

/* WALLET */
.wallet{
  margin-top:10px;
  font-size:16px;
  color:#ccc;
}

/* POPUP */
.popup{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.7);
  display:none;
  align-items:center;
  justify-content:center;
}
.popup-box{
  background:#1c1c1c;
  padding:25px;
  border-radius:16px;
  width:80%;
}
.popup-box h2{
  color:#00ff99;
}
.popup-box button{
  margin-top:15px;
  padding:10px 20px;
  border:none;
  border-radius:10px;
  background:#2196f3;
  color:#fff;
  font-size:16px;
}
</style>
</head>

<body>

<div class="header">‚úàÔ∏è Aviator</div>

<div class="card">
  <div id="multiplier" class="multiplier">1.00x</div>

  <input id="betAmount" type="number" placeholder="Min ‚Çπ1">

  <button id="betBtn" class="btn bet" onclick="placeBet()">Place Bet</button>
  <button id="cashoutBtn" class="btn cashout" onclick="cashOut()" disabled>Cash Out</button>

  <div class="wallet" id="walletText">Wallet: ‚Çπ0</div>
</div>

<!-- POPUP -->
<div class="popup" id="popup">
  <div class="popup-box">
    <h2 id="popupText"></h2>
    <button onclick="closePopup()">OK</button>
  </div>
</div>

<script>
/* WALLET SAVE */
let wallet = localStorage.getItem("aviator_wallet");
if(wallet===null){
  wallet = 100;
  localStorage.setItem("aviator_wallet",wallet);
}
wallet = Number(wallet);
document.getElementById("walletText").innerText="Wallet: ‚Çπ"+wallet;

let multiplier=1;
let interval=null;
let bet=0;
let playing=false;
let crashed=false;

/* OWNER CONTROL (HOUSE EDGE ~10%) */
function getCrashPoint(){
  let r=Math.random();
  if(r<0.10) return (1.1+Math.random()*0.5);   // early crash
  if(r<0.85) return (2+Math.random()*3);       // normal
  return (5+Math.random()*5);                  // rare high
}

let crashAt=getCrashPoint();

/* PLACE BET */
function placeBet(){
  bet=Number(document.getElementById("betAmount").value);
  if(bet<1){
    alert("Minimum bet ‚Çπ1");
    return;
  }
  if(bet>wallet){
    alert("Insufficient balance");
    return;
  }
  wallet-=bet;
  localStorage.setItem("aviator_wallet",wallet);
  document.getElementById("walletText").innerText="Wallet: ‚Çπ"+wallet;

  playing=true;
  crashed=false;
  multiplier=1;
  crashAt=getCrashPoint();

  document.getElementById("betBtn").disabled=true;
  document.getElementById("cashoutBtn").disabled=false;

  interval=setInterval(runGame,100);
}

/* GAME LOOP */
function runGame(){
  multiplier+=0.02;
  document.getElementById("multiplier").innerText=multiplier.toFixed(2)+"x";

  if(multiplier>=crashAt){
    crash();
  }
}

/* CASH OUT */
function cashOut(){
  if(!playing || crashed) return;

  let winAmount=(bet*multiplier).toFixed(0);
  wallet+=Number(winAmount);
  localStorage.setItem("aviator_wallet",wallet);

  showPopup("üéâ You Won ‚Çπ"+winAmount);
  resetGame();
}

/* CRASH */
function crash(){
  crashed=true;
  clearInterval(interval);
  document.getElementById("multiplier").innerText="CRASHED";
  document.getElementById("multiplier").classList.add("crashed");
  showPopup("üí• You Lost ‚Çπ"+bet);
  resetGame();
}

/* RESET */
function resetGame(){
  clearInterval(interval);
  playing=false;
  document.getElementById("betBtn").disabled=false;
  document.getElementById("cashoutBtn").disabled=true;
  document.getElementById("multiplier").classList.remove("crashed");
  document.getElementById("walletText").innerText="Wallet: ‚Çπ"+wallet;
}

/* POPUP */
function showPopup(text){
  document.getElementById("popupText").innerText=text;
  document.getElementById("popup").style.display="flex";
}
function closePopup(){
  document.getElementById("popup").style.display="none";
}
</script>

</body>
</html>
