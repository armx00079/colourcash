<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>K3 - Colour Cash</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f0f0f;
  color:#fff;
}
.center{text-align:center}
.box{
  background:#1c1c1c;
  margin:15px;
  padding:15px;
  border-radius:14px;
}
h2{margin:10px 0}

.timer{font-size:36px;color:#ff4d8d}
input{
  width:100%;
  padding:12px;
  font-size:18px;
  border-radius:10px;
  border:none;
  text-align:center;
}

.btn{
  padding:14px;
  border-radius:12px;
  font-weight:bold;
  cursor:pointer;
  user-select:none;
}
.orange{background:#f6ad55}
.blue{background:#63b3ed}
.green{background:#48bb78}
.red{background:#f56565}
.gray{background:#2d2d2d}

.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.grid6{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}

.tab{
  padding:12px;
  border-radius:12px;
  text-align:center;
  cursor:pointer;
}
.tab-pink{background:#ff6b6b}
.tab-dark{background:#2b2b2b}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  padding:8px;
  border-bottom:1px solid #333;
  font-size:14px;
  text-align:center;
}
th{background:#ff6b6b}
.win{color:#4caf50}
.loss{color:#ff5252}
.dice{
  width:50px;height:50px;
  background:#e53935;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:bold;
}
.flex{display:flex;gap:10px;justify-content:center}
</style>
</head>

<body>

<div class="center">
  <h2>ðŸŽ² K3</h2>
  <div>Period: <span id="period"></span> | Wallet: â‚¹<span id="wallet"></span></div>
  <div class="timer"><span id="time"></span>s</div>
</div>

<div class="flex">
  <div class="dice" id="d1">?</div>
  <div class="dice" id="d2">?</div>
  <div class="dice" id="d3">?</div>
</div>

<div class="box">
  <input id="amount" placeholder="Min â‚¹1" type="number">
</div>

<div class="box grid2">
  <div class="btn orange" onclick="place('BIG')">BIG (11â€“18)</div>
  <div class="btn blue" onclick="place('SMALL')">SMALL (3â€“10)</div>
  <div class="btn green" onclick="place('EVEN')">EVEN</div>
  <div class="btn red" onclick="place('ODD')">ODD</div>
</div>

<div class="box grid6">
  <div class="btn gray" onclick="place(3)">3</div>
  <div class="btn gray" onclick="place(4)">4</div>
  <div class="btn gray" onclick="place(5)">5</div>
  <div class="btn gray" onclick="place(6)">6</div>
  <div class="btn gray" onclick="place(7)">7</div>
  <div class="btn gray" onclick="place(8)">8</div>
  <div class="btn gray" onclick="place(9)">9</div>
  <div class="btn gray" onclick="place(10)">10</div>
  <div class="btn gray" onclick="place(11)">11</div>
  <div class="btn gray" onclick="place(12)">12</div>
  <div class="btn gray" onclick="place(13)">13</div>
  <div class="btn gray" onclick="place(14)">14</div>
  <div class="btn gray" onclick="place(15)">15</div>
  <div class="btn gray" onclick="place(16)">16</div>
  <div class="btn gray" onclick="place(17)">17</div>
  <div class="btn gray" onclick="place(18)">18</div>
</div>

<div class="box grid2">
  <div class="tab tab-pink" onclick="view='history'">Game History</div>
  <div class="tab tab-pink" onclick="view='bets'">My Bets</div>
</div>

<div class="box">
  <table id="table"></table>
</div>

<script>
let state = JSON.parse(localStorage.getItem("k3")) || {
  period:202601200001,
  wallet:100,
  start:Date.now(),
  history:[],
  bets:[]
};

let view="history";
const DURATION=30;

function save(){localStorage.setItem("k3",JSON.stringify(state));}

function left(){
  return DURATION - Math.floor((Date.now()-state.start)/1000);
}

function tick(){
  let t=left();
  if(t<=0){
    settle();
    state.period++;
    state.start=Date.now();
    state.bets=[];
    save();
  }
  document.getElementById("time").innerText=Math.max(t,0);
  document.getElementById("period").innerText=state.period;
  document.getElementById("wallet").innerText=state.wallet;
  render();
}
setInterval(tick,1000);

function place(type){
  let a=+amount.value;
  if(a<1) return alert("Minimum â‚¹1");
  if(a>state.wallet) return alert("Insufficient balance");
  if(left()<=5) return alert("Bet closed");

  state.wallet-=a;
  state.bets.push({period:state.period,type,amt:a});
  save();
}

function settle(){
  let d1=1+Math.floor(Math.random()*6);
  let d2=1+Math.floor(Math.random()*6);
  let d3=1+Math.floor(Math.random()*6);
  d1el.innerText=d1;d2el.innerText=d2;d3el.innerText=d3;
  let sum=d1+d2+d3;
  let res = sum>=11?"BIG":"SMALL";

  state.bets.forEach(b=>{
    let win=false,pay=0;
    if(b.type===res||b.type==sum||
       (b.type==="EVEN"&&sum%2==0)||
       (b.type==="ODD"&&sum%2==1)){
      win=true;
      pay=b.amt*2;
    }
    if(win) state.wallet+=pay;
    state.history.unshift({
      period:b.period,
      sum,
      result:win?`+â‚¹${pay}`:`-â‚¹${b.amt}`
    });
  });
  state.history=state.history.slice(0,10);
  save();
}

function render(){
  let t=document.getElementById("table");
  if(view==="history"){
    t.innerHTML="<tr><th>Period</th><th>Sum</th><th>Result</th></tr>"+
    state.history.map(r=>`<tr><td>${r.period}</td><td>${r.sum}</td><td>${r.result}</td></tr>`).join("");
  }else{
    t.innerHTML="<tr><th>Period</th><th>Bet</th><th>Amount</th></tr>"+
    state.bets.map(b=>`<tr><td>${b.period}</td><td>${b.type}</td><td>â‚¹${b.amt}</td></tr>`).join("");
  }
}

let d1el=document.getElementById("d1");
let d2el=document.getElementById("d2");
let d3el=document.getElementById("d3");
tick();
</script>

</body>
</html>
