<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>K3</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#fff}
.header{text-align:center;padding:15px;font-size:22px}
.card{background:#1c1c1c;margin:12px;border-radius:14px;padding:15px}
.timer{text-align:center;font-size:34px;color:#ff4d88}
.dice{display:flex;justify-content:center;gap:12px;margin-top:10px}
.dice div{width:55px;height:55px;background:#e53935;border-radius:10px;
display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:bold}

input{width:100%;padding:12px;border:none;border-radius:10px;font-size:18px}
.actions{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
.btn{padding:14px;border-radius:12px;text-align:center;font-weight:bold;cursor:pointer}
.big{background:#f4a261}.small{background:#4dabf7}
.even{background:#4caf50}.odd{background:#e53935}

.numbers{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
.num{background:#2a2a2a;padding:14px;text-align:center;border-radius:10px;cursor:pointer}

.lock{filter:blur(3px);pointer-events:none}

.tabs{display:flex;gap:10px;margin:12px}
.tab{flex:1;background:#ff6f6f;padding:12px;border-radius:12px;
text-align:center;font-weight:bold;cursor:pointer}

table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #333;text-align:center}
.hidden{display:none}
</style>
</head>

<body>

<div class="header">ðŸŽ² K3</div>

<div class="card">
  <div id="info"></div>
  <div class="timer" id="timer">30s</div>
  <div class="dice" id="dice"></div>
</div>

<div class="card" id="betArea">
  <input id="amount" type="number" placeholder="Min â‚¹1">

  <div class="actions">
    <div class="btn big" onclick="placeBet('BIG')">BIG (11â€“18)</div>
    <div class="btn small" onclick="placeBet('SMALL')">SMALL (3â€“10)</div>
    <div class="btn even" onclick="placeBet('EVEN')">EVEN</div>
    <div class="btn odd" onclick="placeBet('ODD')">ODD</div>
  </div>

  <div class="numbers" id="numbers"></div>
</div>

<div class="tabs">
  <div class="tab" onclick="showGame()">Game History</div>
  <div class="tab" onclick="showBets()">My Bets</div>
</div>

<div class="card">
  <table id="gameTable"></table>
  <div id="betsBox" class="hidden"></div>
</div>

<script>
const KEY="K3_STATE";

// ðŸ”¥ PERIOD BASE + COUNTER
const PERIOD_BASE = "2026012000";

let state = JSON.parse(localStorage.getItem(KEY)) || {
  counter:137,
  time:30,
  dice:[null,null,null],
  history:[],
  bets:[]
};

function save(){localStorage.setItem(KEY,JSON.stringify(state));}

function getPeriod(){
  return PERIOD_BASE + state.counter;
}

function drawDice(){
  let d=state.dice.map(v=>v??"?");
  document.getElementById("dice").innerHTML=
    `<div>${d[0]}</div><div>${d[1]}</div><div>${d[2]}</div>`;
}

function roll(){
  state.dice=[
    Math.ceil(Math.random()*6),
    Math.ceil(Math.random()*6),
    Math.ceil(Math.random()*6)
  ];
  let sum=state.dice.reduce((a,b)=>a+b,0);
  state.history.unshift({
    period:getPeriod(),
    sum,
    result:sum>=11?"BIG":"SMALL"
  });
  state.history=state.history.slice(0,10);
}

function tick(){
  state.time--;

  if(state.time<=0){
    roll();
    state.counter++;   // âœ… PERIOD INCREMENT
    state.time=30;
  }

  document.getElementById("timer").innerText=state.time+"s";
  document.getElementById("info").innerText=
    "Period: "+getPeriod()+" | Wallet: â‚¹100";

  if(state.time<=5)
    document.getElementById("betArea").classList.add("lock");
  else
    document.getElementById("betArea").classList.remove("lock");

  drawDice();
  save();
}

function placeBet(type){
  let amt=Number(document.getElementById("amount").value);
  if(amt<1){
    alert("Minimum bet â‚¹1");
    return;
  }
  state.bets.unshift({
    period:getPeriod(),
    bet:type,
    amount:amt
  });
  alert("Bet placed on "+type+" â‚¹"+amt);
  save();
}

function showGame(){
  document.getElementById("betsBox").classList.add("hidden");
  let t=document.getElementById("gameTable");
  t.innerHTML="<tr><th>Period</th><th>Sum</th><th>Result</th></tr>";
  state.history.forEach(h=>{
    t.innerHTML+=`<tr><td>${h.period}</td><td>${h.sum}</td><td>${h.result}</td></tr>`;
  });
}

function showBets(){
  document.getElementById("gameTable").innerHTML="";
  let b=document.getElementById("betsBox");
  b.classList.remove("hidden");
  b.innerHTML="";
  state.bets.forEach(x=>{
    b.innerHTML+=`<div>${x.period} | ${x.bet} | â‚¹${x.amount}</div>`;
  });
}

let nums="";
for(let i=3;i<=18;i++)
  nums+=`<div class="num" onclick="placeBet(${i})">${i}</div>`;
document.getElementById("numbers").innerHTML=nums;

drawDice();
showGame();
setInterval(tick,1000);
</script>

</body>
</html>
