<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>K3</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#fff}
.header{text-align:center;padding:14px;font-size:22px}
.card{background:#1c1c1c;border-radius:14px;padding:15px;margin:12px}
.timer{font-size:36px;color:#ff4081;text-align:center}
.dice{display:flex;justify-content:center;gap:10px;margin:10px}
.dice div{width:55px;height:55px;border-radius:10px;
background:#e53935;display:flex;align-items:center;
justify-content:center;font-size:26px}
input{width:100%;padding:12px;border-radius:10px;border:none}
.row{display:flex;gap:10px;margin-top:10px}
.btn{flex:1;padding:12px;border-radius:10px;
text-align:center;font-weight:bold}
.big{background:#f4a261}
.small{background:#4dabf7}
.even{background:#4caf50}
.odd{background:#e53935}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:10px}
.num{padding:14px;background:#2a2a2a;border-radius:10px;text-align:center}
.lock{filter:blur(3px);pointer-events:none}
.tabs{display:flex;gap:10px;margin:10px}
.tab{flex:1;padding:12px;background:#ff6f6f;border-radius:10px;text-align:center}
table{width:100%;border-collapse:collapse}
td,th{padding:8px;border-bottom:1px solid #333;text-align:center}
.popup{position:fixed;inset:0;background:rgba(0,0,0,.6);
display:none;align-items:center;justify-content:center}
.pop{background:#222;padding:20px;border-radius:12px;text-align:center}
.pop button{margin-top:10px;padding:8px 20px;border:none;border-radius:8px}
</style>
</head>

<body>

<div class="header">ðŸŽ² K3</div>

<div class="card">
  <div id="info"></div>
  <div class="timer" id="timer">30s</div>

  <div class="dice" id="dice">
    <div>?</div><div>?</div><div>?</div>
  </div>
</div>

<div class="card" id="betArea">
  <input id="amount" placeholder="Min â‚¹1">

  <div class="row">
    <div class="btn big" onclick="placeBet('BIG')">BIG (11-18)</div>
    <div class="btn small" onclick="placeBet('SMALL')">SMALL (3-10)</div>
  </div>

  <div class="row">
    <div class="btn even" onclick="placeBet('EVEN')">EVEN</div>
    <div class="btn odd" onclick="placeBet('ODD')">ODD</div>
  </div>

  <div class="grid" id="numbers"></div>
</div>

<div class="tabs">
  <div class="tab" onclick="showHistory()">Game History</div>
  <div class="tab" onclick="showBets()">My Bets</div>
</div>

<div class="card">
  <table id="table"></table>
</div>

<div class="popup" id="popup">
  <div class="pop">
    <div id="popupText"></div>
    <button onclick="closePop()">OK</button>
  </div>
</div>

<script>
const ROUND = 30;
const BASE_TIME = 1700000000000;
const BASE_PERIOD = 2026012000137;

let wallet = Number(localStorage.wallet)||100;
let bets = JSON.parse(localStorage.bets||"[]");
let history = JSON.parse(localStorage.history||"[]");

let dice=[0,0,0],lastRound=-1;

function period(){
 return BASE_PERIOD + Math.floor((Date.now()-BASE_TIME)/(ROUND*1000));
}

function tick(){
 let now=Date.now();
 let elapsed=Math.floor((now-BASE_TIME)/1000);
 let remain=ROUND-(elapsed%ROUND);
 let round=Math.floor(elapsed/ROUND);

 timer.innerText=remain+"s";
 info.innerText="Period: "+period()+" | Wallet: â‚¹"+wallet;

 if(remain<=5) betArea.classList.add("lock");
 else betArea.classList.remove("lock");

 if(round!==lastRound){
   lastRound=round;
   dice=[r(),r(),r()];
   let sum=dice[0]+dice[1]+dice[2];
   history.unshift({p:period(),s:sum,r:sum>=11?"BIG":"SMALL"});
   history=history.slice(0,10);
   localStorage.history=JSON.stringify(history);
 }
 diceEl();
}

function r(){return Math.floor(Math.random()*6)+1;}

function diceEl(){
 diceBox.innerHTML=`<div>${dice[0]}</div><div>${dice[1]}</div><div>${dice[2]}</div>`;
}

function placeBet(type){
 let amt=Number(amount.value);
 if(amt<1) return pop("Minimum â‚¹1");
 if(wallet<amt) return pop("Low balance");

 wallet-=amt;
 localStorage.wallet=wallet;
 bets.unshift({p:period(),b:type,a:amt});
 localStorage.bets=JSON.stringify(bets);
 pop("Bet placed");
}

function showHistory(){
 table.innerHTML="<tr><th>Period</th><th>Sum</th><th>Result</th></tr>";
 history.forEach(h=>{
 table.innerHTML+=`<tr><td>${h.p}</td><td>${h.s}</td><td>${h.r}</td></tr>`;
 });
}

function showBets(){
 table.innerHTML="<tr><th>Period</th><th>Bet</th><th>Amount</th></tr>";
 bets.forEach(b=>{
 table.innerHTML+=`<tr><td>${b.p}</td><td>${b.b}</td><td>â‚¹${b.a}</td></tr>`;
 });
}

function pop(msg){popupText.innerText=msg;popup.style.display="flex";}
function closePop(){popup.style.display="none";}

let nums="";
for(let i=3;i<=18;i++) nums+=`<div class="num" onclick="placeBet(${i})">${i}</div>`;
numbers.innerHTML=nums;

setInterval(tick,1000);
</script>

</body>
</html>
