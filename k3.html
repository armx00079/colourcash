<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>K3</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body{
  margin:0;
  background:#0f0f0f;
  color:#fff;
  font-family:Arial;
}
.header{text-align:center;font-size:22px;padding:12px;}
.top{display:flex;justify-content:space-between;padding:0 15px;color:#aaa;}
.timer{text-align:center;font-size:34px;color:#ff4081;margin:8px 0;}
.box{background:#1c1c1c;margin:15px;padding:15px;border-radius:14px;}
input{width:100%;padding:12px;border-radius:8px;border:none;font-size:16px;text-align:center}
.row{display:flex;gap:10px;margin-top:10px}
.btn{flex:1;padding:14px;border-radius:10px;font-weight:bold;text-align:center;cursor:pointer}
.big{background:#f4a261}.small{background:#4dabf7}
.even{background:#43a047}.odd{background:#e53935}
.disabled{opacity:.4;pointer-events:none}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
.num{background:#2a2a2a;padding:14px;border-radius:10px;text-align:center;cursor:pointer}
.history{margin:15px}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #333;text-align:center}
.diceBox{display:flex;justify-content:center;gap:10px;margin:10px}
.dice{
  width:50px;height:50px;
  background:#e53935;
  border-radius:8px;
  display:flex;align-items:center;justify-content:center;
  font-size:22px;font-weight:bold;
  animation:roll .6s ease
}
@keyframes roll{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
</style>
</head>

<body>

<div class="header">üé≤ K3</div>

<div class="top">
  <div>Period: <span id="period"></span></div>
  <div>Wallet: ‚Çπ<span id="wallet"></span></div>
</div>

<div class="timer">‚è≥ <span id="time"></span>s</div>

<div class="diceBox">
  <div class="dice" id="d1">?</div>
  <div class="dice" id="d2">?</div>
  <div class="dice" id="d3">?</div>
</div>

<div class="box">
<input id="betAmt" type="number" placeholder="Min ‚Çπ1">

<div class="row">
  <div class="btn big" onclick="placeBet('BIG')">BIG (11-18)</div>
  <div class="btn small" onclick="placeBet('SMALL')">SMALL (3-10)</div>
</div>
<div class="row">
  <div class="btn even" onclick="placeBet('EVEN')">EVEN</div>
  <div class="btn odd" onclick="placeBet('ODD')">ODD</div>
</div>

<div class="grid">
  <div class="num" onclick="placeBet('NUM:3')">3</div>
  <div class="num" onclick="placeBet('NUM:4')">4</div>
  <div class="num" onclick="placeBet('NUM:5')">5</div>
  <div class="num" onclick="placeBet('NUM:6')">6</div>
  <div class="num" onclick="placeBet('NUM:7')">7</div>
  <div class="num" onclick="placeBet('NUM:8')">8</div>
  <div class="num" onclick="placeBet('NUM:9')">9</div>
  <div class="num" onclick="placeBet('NUM:10')">10</div>
  <div class="num" onclick="placeBet('NUM:11')">11</div>
  <div class="num" onclick="placeBet('NUM:12')">12</div>
  <div class="num" onclick="placeBet('NUM:13')">13</div>
  <div class="num" onclick="placeBet('NUM:14')">14</div>
  <div class="num" onclick="placeBet('NUM:15')">15</div>
  <div class="num" onclick="placeBet('NUM:16')">16</div>
  <div class="num" onclick="placeBet('NUM:17')">17</div>
  <div class="num" onclick="placeBet('NUM:18')">18</div>
</div>
</div>

<div class="history">
<h3>Last 10 Results</h3>
<table>
<thead><tr><th>Period</th><th>Sum</th><th>Result</th></tr></thead>
<tbody id="hist"></tbody>
</table>
</div>

<script>
const DAY= new Date().toISOString().slice(0,10).replace(/-/g,'');
let state=JSON.parse(localStorage.getItem("k3_state"))||{
  wallet:100,
  period:1,
  start:Date.now(),
  history:[],
  bets:[]
};

function save(){localStorage.setItem("k3_state",JSON.stringify(state))}

function currentPeriod(){return DAY+String(state.period).padStart(4,'0')}

function updateUI(){
  period.innerText=currentPeriod();
  wallet.innerText=state.wallet;
}

function placeBet(type){
  if(timeLeft()<=5)return alert("Bet closed");
  let amt=+betAmt.value;
  if(amt<1||amt>state.wallet)return;
  state.bets.push({type,amt});
  state.wallet-=amt;
  save();updateUI();
}

function timeLeft(){
  return 30-Math.floor((Date.now()-state.start)/1000)%30
}

setInterval(()=>{
  let t=timeLeft();
  time.innerText=t;
  if(t===0){
    let d1=1+Math.random()*6|0;
    let d2=1+Math.random()*6|0;
    let d3=1+Math.random()*6|0;
    d1El.innerText=d1;d2El.innerText=d2;d3El.innerText=d3;
    let sum=d1+d2+d3;

    state.bets.forEach(b=>{
      let win=false;
      if(b.type==="BIG"&&sum>=11)win=true;
      if(b.type==="SMALL"&&sum<=10)win=true;
      if(b.type==="EVEN"&&sum%2===0)win=true;
      if(b.type==="ODD"&&sum%2===1)win=true;
      if(b.type==="NUM:"+sum)win=true;
      if(win)state.wallet+=b.amt*2;
    });

    state.history.unshift({p:currentPeriod(),sum,res:sum>=11?"BIG":"SMALL"});
    state.history=state.history.slice(0,10);
    state.bets=[];
    state.period++;
    state.start=Date.now();
    save();
  }
  hist.innerHTML=state.history.map(h=>`<tr><td>${h.p}</td><td>${h.sum}</td><td>${h.res}</td></tr>`).join('');
  updateUI();
},1000);

const period=document.getElementById("period");
const wallet=document.getElementById("wallet");
const time=document.getElementById("time");
const hist=document.getElementById("hist");
const betAmt=document.getElementById("betAmt");
const d1El=document.getElementById("d1");
const d2El=document.getElementById("d2");
const d3El=document.getElementById("d3");

updateUI();
</script>

</body>
</html>
